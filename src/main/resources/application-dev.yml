spring:
  application:
    name: codoc
  jackson:
    time-zone: Asia/Seoul
  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration


  datasource:
    url: ${DB_URL}
    username: ${DB_USER}
    password: ${DB_PASS}
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: ${DDL_AUTO:validate}

    open-in-view: false

jwt:
  secret: ${JWT_SECRET}
  access-token-ttl-minutes: 15
  refresh-token-ttl-days: 7
  cookie-secure: ${JWT_COOKIE_SECURE:true}

kakao:
  client-id: ${KAKAO_CLIENT_ID}
  client-secret: ${KAKAO_CLIENT_SECRET:}
  redirect-uri: ${KAKAO_REDIRECT_URI}
  admin-key: ${KAKAO_ADMIN_KEY:}
  scope: ${KAKAO_SCOPE:}

app:
  frontend:
    base-url: ${APP_FRONTEND_BASE_URL:http://localhost:5173}
  ai-server:
    base-url: ${APP_AI_SERVER_BASE_URL:http://localhost:8000}
    base-timeout: 3s
    chatbot-stream-timeout: 10s
  analysis-server:
    base-url: ${APP_ANALYSIS_SERVER_BASE_URL:http://localhost:8010}
    base-timeout: 60s
    recommend-timeout: 60s

  chatbot:
    session-ttl: 30m

  fcm:
    enabled: ${APP_FCM_ENABLED:false}

  rate-limit:
    chatbot-stream:
      enabled: ${RATE_LIMIT_CHATBOT_STREAM_ENABLED:true}
      limit: ${RATE_LIMIT_CHATBOT_STREAM_LIMIT:10}
      period: ${RATE_LIMIT_CHATBOT_STREAM_PERIOD:1m}
      consume-token: ${RATE_LIMIT_CHATBOT_STREAM_CONSUME:1}
    global:
      enabled: ${RATE_LIMIT_GLOBAL_ENABLED:true}
      limit: ${RATE_LIMIT_GLOBAL_LIMIT:120}
      period: ${RATE_LIMIT_GLOBAL_PERIOD:1m}
      consume-token: ${RATE_LIMIT_GLOBAL_CONSUME:1}

management:
  endpoints:
      access:
        default: none

springdoc:
  swagger-ui:
    try-it-out-enabled: false
    supported-submit-methods: []
    path: ${SWAGGER_UI_PATH:/swagger-ui.html}
    enabled: true
  api-docs:
    path: ${SWAGGER_API_DOCS_PATH:/v3/api-docs}
    enabled: true

logging:
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - loadtest=%X{loadtest} %msg%n"
